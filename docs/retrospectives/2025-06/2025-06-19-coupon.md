# 🧾 프로젝트 회고 - [쿠폰 시스템]

> 📅 날짜: 2025-06-19  
> 🧑‍💻 작성자: psjw  
> 🔁 작업 브랜치: retrospectives/2025-06

---

## ✅ 오늘의 작업 요약

- [x] Event 및 Coupon 관련 핵심 엔티티 (Event, CouponInventory, CouponCode 등) 정의 및 생성
- [x] 쿠폰 상태 관련 컬럼 추가 (issue_status) 및 COUPON_ISSUE ↔ COUPON_CODE, COUPON_USAGE 간 관계 재설계
- [x] 위 구조 변경 사항에 따른 ERD 다이어그램 수정 및 반영

---

## ⚙️ 구현 또는 수정한 기능 상세

| 기능                                         | 설명                                                                                      |
|--------------------------------------------|-------------------------------------------------------------------------------------------|
| Event 도메인 구성                            | Event, DrawWinner, EventParticipant 등 이벤트 관련 핵심 도메인 설계 및 구현                  |
| Coupon 도메인 구성                           | CouponBatch, CouponCode, CouponInventory, CouponIssue, CouponUsage, PartnerCoupon 등 설계 |
| Issue와 Code 관계 변경                       | 기존 다대일(COUPON_ISSUE → COUPON_CODE) 관계를 일대일로 재설계                              |
| 쿠폰 발급 상태 컬럼 추가                     | COUPON_ISSUE에 issue_status 컬럼 추가 (PENDING 상태로 기본 설정)                            |
| ERD 재작성 및 반영                           | 위 구조 변경 사항을 시각적으로 명확히 표현하여 ERD 다이어그램에 반영                          |




---

## 🧩 문제와 해결

| 문제 상황                                                       | 해결 방법                                                              |
|----------------------------------------------------------------|---------------------------------------------------------------------|
| COUPON_ISSUE와 CODE 관계가 다대일로 되어 있어 데이터 일관성 보장 어려움 | 일대일로 재설계하여 쿠폰 1개는 한 번만 발급될 수 있도록 보장                      |
| 사용자가 쿠폰 입력 후 이벤트 완료하지 않을 시 상태 관리 미흡            | issue_status 컬럼을 추가하여 PENDING → COMPLETED 등 상태 관리 도입 |


---

## 📚 오늘 배운 것 / 인사이트

- 도메인 설계는 고정되지 않으며, 실제 시나리오를 반영해 유연하게 재설계되어야 함을 체감함
- 작은 관계 하나가 전체 로직에 큰 영향을 줄 수 있음을 경험함

---

## 🔜 다음 작업 또는 TODO

- [ ] 각 도메인 클래스의 필드 및 메서드 구현 검토
- [ ] JPA 기반으로 실제 DB 연동 및 테이블 매핑 확인

---


