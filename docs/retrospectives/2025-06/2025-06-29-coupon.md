# ğŸ§¾ í”„ë¡œì íŠ¸ íšŒê³  - [ì¿ í° ì‹œìŠ¤í…œ]

> ğŸ“… ë‚ ì§œ: 2025-06-29  
> ğŸ§‘â€ğŸ’» ì‘ì„±ì: psjw  
> ğŸ” ì‘ì—… ë¸Œëœì¹˜: retrospectives/2025-06

---

## âœ… ì˜¤ëŠ˜ì˜ ì‘ì—… ìš”ì•½

- `CouponBatchJobRepository` ì¸í„°í˜ì´ìŠ¤ ì •ì˜ ë° JPA êµ¬í˜„ì²´ ê°œë°œ
- ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ êµ¬ì¡° ì„¤ê³„ (`ErrorCode`, `BaseException`, `GlobalExceptionHandler`)
- OSIV ì„¤ì •ì„ application.ymlì— ë°˜ì˜ (`open-in-view: false`)

---

## âš™ï¸ êµ¬í˜„ ë˜ëŠ” ìˆ˜ì •í•œ ê¸°ëŠ¥ ìƒì„¸

| ê¸°ëŠ¥                  | ì„¤ëª…                                                                                                                |
|---------------------|-------------------------------------------------------------------------------------------------------------------|
| **ì¿ í° ë°°ì¹˜ ì‘ì—… ì €ì¥ì†Œ êµ¬ì„±** | `CouponBatchJobRepository` ì¸í„°í˜ì´ìŠ¤ ì •ì˜ ë° êµ¬í˜„: `JpaCouponBatchJobRepository`, JPA ì—°ë™ìš© `CouponBatchJobJpaRepository` ì¶”ê°€ |
| **ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ êµ¬ì¡° ì„¤ê³„**  | `ErrorCode` ë° `BaseException` ê¸°ë°˜ ì»¤ìŠ¤í…€ ì˜ˆì™¸ êµ¬ì¡° ë„ì…, `GlobalExceptionHandler` ë° `ErrorResponse` ì„¤ê³„                      |
| **OSIV ì„¤ì • ì ìš©**      | `application.yml`ì— `spring.jpa.open-in-view: false` ì„¤ì • ì ìš©í•˜ì—¬ ì»¤ë„¥ì…˜ ê´€ë¦¬ ìµœì í™”                                            |

---

## ğŸ§© ë¬¸ì œì™€ í•´ê²°

### ğŸš§ ë¬¸ì œ 1: OSIV ì„¤ì •ìœ¼ë¡œ ì¸í•œ ì»¤ë„¥ì…˜ ì ìœ 

- **ë¬¸ì œ:** OSIV(Open Session In View)ê°€ í™œì„±í™”ëœ ê²½ìš°, ìš”ì²­-ì‘ë‹µ ì‚¬ì´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê³„ì† ìœ ì§€ë˜ì–´ ì»¤ë„¥ì…˜ì´ ë°˜í™˜ë˜ì§€ ì•ŠìŒ
- **í•´ê²°:** `spring.jpa.open-in-view: false`ë¡œ ì„¤ì •í•˜ì—¬ íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œì ì— ì»¤ë„¥ì…˜ ë°˜í™˜ë˜ë„ë¡ ì¡°ì •
---

### ğŸš§ ë¬¸ì œ 2: ì˜ˆì™¸ ì‘ë‹µ ë©”ì‹œì§€ í†µì¼

- **ë¬¸ì œ:** APIì—ì„œ ì˜ˆì™¸ ë°œìƒ ì‹œ ì‘ë‹µ í¬ë§·ì´ ì¼ê´€ë˜ì§€ ì•ŠìŒ
- **í•´ê²°:**
    - `ErrorCode`ì— ë©”ì‹œì§€/ì½”ë“œ/ìƒíƒœ ì •ë¦¬
    - `BaseException` â†’ `ErrorCode` ì£¼ì… êµ¬ì¡°
    - `GlobalExceptionHandler`ì—ì„œ `BaseException` í¬ì°© í›„ `ErrorResponse` ìƒì„±í•´ ë°˜í™˜
---


## ğŸ“š ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ / ì¸ì‚¬ì´íŠ¸


- ê³µí†µ ì˜ˆì™¸ êµ¬ì¡°ë¥¼ ë‹¨ì¼ enumìœ¼ë¡œ ê´€ë¦¬í•˜ë˜, ë„ë©”ì¸ë³„ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì¤€ë¹„
- OSIVëŠ” ì§€ì—° ë¡œë”©ì—ëŠ” ìœ ìš©í•˜ì§€ë§Œ ì»¤ë„¥ì…˜ ì ìœ  ì¸¡ë©´ì—ì„œëŠ” ë¹„í™œì„±í™”ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ìœ ë¦¬
---

## ğŸ—‚ï¸ ê´€ë ¨ ì»¤ë°‹

- [x] feat(exception): ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ êµ¬ì¡° ì¶”ê°€ (BaseException, ErrorCode, ErrorResponse)
- [x] refactor(exception): ê³µí†µ ë° ë„ë©”ì¸ ì˜ˆì™¸ íŒ¨í‚¤ì§€ êµ¬ì¡° ë¶„ë¦¬ (common.error -> common.exception)
- [x] feat(repository-coupon): JpaCouponBatchJobRepository
- [x] refactor(id-generator): SnowflakeIdGenerator íŒ¨í‚¤ì§€ ì´ë™ ë° êµ¬ì¡° ì •ë¦¬
- [x] feat(domain-coupon): CouponBatchJobRepository ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
- [x] chore(config): JPA OSIV falseë¡œ ì „ì—­ ì„¤ì • ë³€ê²½

---

## ğŸ”œ ë‹¤ìŒ ì‘ì—… ë˜ëŠ” TODO

- [ ] Bloom Filter ì‹¤í—˜ ë° ë°˜ì˜ ì—¬ë¶€ ê²°ì •
- [ ] `CouponService`ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„¤ê³„ ë° êµ¬í˜„ ì‹œì‘

---



